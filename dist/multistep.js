"use strict";(()=>{var e=0,d=0,t=$('[data-form="step"]'),I=$('[data-form="progress-indicator"]').clone(),b,k=!1,c=!0,p=!0,u=!0,h=!0,n="",a=[],m=[],s=[],w=$("[data-reinit]").data("reinit"),N=0,C=0,S=0,F=0,l=[],g=JSON.parse(localStorage.getItem("filledInput")),D=$("[data-memory]").data("memory"),z=$("[data-quiz]").data("quiz");$(I).removeClass("current");$('[data-form="progress"]').children().remove();$('[data-text="total-steps"]').text($('[data-form="step"]:not([data-card="true"])').length);$('[data-form="submit-btn"]').hide();$(t[e]).data("card")?d=d+0:d=d+1;$('[data-text="current-step"]').text(d);t.hide();g&&D&&g.forEach(i=>{$(`input[name="${i.inputName}"][value="${i.value}"]`).attr("type")==="radio"?($(`input[name="${i.inputName}"][value="${i.value}"]`).click(),$(`input[name="${i.inputName}"][value="${i.value}"]`).siblings(".w-radio-input").addClass("w--redirected-checked")):i.value==="on"?($(`input[name="${i.inputName}"]`).click(),$(`input[name="${i.inputName}"]`).siblings(".w-checkbox-input").addClass("w--redirected-checked")):$(`input[name="${i.inputName}"]`).val(i.value)});z&&t.each(function(){$(this).children().attr("data-radio-skip",!0),$(this).children().attr("data-radio-delay",250)});function x(){k=!1,$('[data-form="next-btn"]').css({opacity:"0.2","pointer-events":"none"}),$('[data-form="submit-btn"]').css({opacity:"0.5","pointer-events":"none"})}function v(){k=!0,$('[data-form="next-btn"]').css({opacity:"1","pointer-events":"auto"}),$('[data-form="submit-btn"]').css({opacity:"1","pointer-events":"auto"})}function W(){$('form[data-form="multistep"] :input').not('[type="submit"]').each(function(){$(this).attr("type")==="checkbox"||$(this).attr("type")==="radio"?$(this).prop("checked")&&(l.some(i=>i.inputName===$(this).attr("name"))?(l=l.filter(i=>i.inputName!==$(this).attr("name")),l.push({inputName:$(this).attr("name"),value:$(this).val()})):l.push({inputName:$(this).attr("name"),value:$(this).val()})):l.some(i=>i.inputName===$(this).attr("name"))?(l=l.filter(i=>i.inputName!==$(this).attr("name")),l.push({inputName:$(this).attr("name"),value:$(this).val()})):l.push({inputName:$(this).attr("name"),value:$(this).val()})}),localStorage.removeItem("filledInput"),localStorage.setItem("filledInput",JSON.stringify(l)),console.log(g)}function y(){s=[],N=$("textarea:visible").length,C=$(t[e]).find('input[type="text"]:visible').length,S=$(t[e]).find('input[type="email"]:visible').length,F=$(t[e]).find('input[type="checkbox"]:visible').length,$('[data-form="custom-progress-indicator"]').removeClass("current"),$($('[data-form="custom-progress-indicator"]')[e]).addClass("current"),m=a.filter(i=>i.step===e-1),$("[data-answer]").hide(),t.hide(),w===!0&&window.Webflow.destroy(),$(b[e]).addClass("current"),w===!0?(window.Webflow&&window.Webflow.require("ix2").init(),document.dispatchEvent(new Event("readystatechange")),$(t[e]).show()):$(t[e]).fadeIn("slow"),m.length>0?$(t[e]).find(`[data-answer="${m[0].selected}"]`).show():($(t[e]).find(`[data-answer="${n}"]`).show(),console.log($(t[e]).find(`[data-answer="${n}"]`).find(":input"))),e===0?$('[data-form="back-btn"]').hide():e===t.length-1||$(t[e]).find('[data-form="submit"]:visible').length>0?($('[data-form="next-btn"]').hide(),$('[data-form="submit-btn"]').show(),$('[data-form="back-btn"]').show()):($('[data-form="next-btn"]').show(),$('[data-form="back-btn"]').show(),$('[data-form="submit-btn"]').hide()),$($(t[e]).find("input[autofocus]")[0]).focus(),$($(t[e]).find("textarea[autofocus]")[0]).focus(),a=a.filter(i=>i.step!==e),$(t[e]).find(":input").trigger("input"),E()}function q(i){var f=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;console.log("email",i),f.test(i)?h=!0:h=!1}function E(i){c=!0,p=!0,u=!0,$(t[e]).data("card")&&v(),$(t[e]).find("input[required]:visible").length>0?x():v();var f=$(t[e]).data("checkbox")?$(t[e]).data("checkbox"):0;$("[data-logic-extra]").data("logic-extra")?(console.log("logic extra"),$(t[e]).find("[data-answer]:visible").find(":input").is('[type="checkbox"]')&&(f==="*"||f>$(t[e]).find(':input[type="checkbox"]').length?$(t[e]).find(':input[type="checkbox"]').each(function(){$(this).is(":checked")?$(t[e]).find(":input[required]").length<1&&(n=$(this).parents("[data-go-to]").attr("data-go-to"),a=a.filter(r=>r.step!==e),a.push({step:e,selected:n}),u=!0):u=!1}):$(t[e]).find("[data-answer]:visible").find(':input[type="checkbox"]:checked').length>=f?(console.log($(t[e]).find(":input[required]").length),$(t[e]).find(":input[required]").length<1&&(n=$(t[e]).find("[data-answer]:visible").find(':input[type="checkbox"]:checked').parents("[data-go-to]").attr("data-go-to"),a=a.filter(r=>r.step!==e),a.push({step:e,selected:n}),u=!0)):u=!1),$(t[e]).find("[data-answer]:visible").find(":input[required]").is('[type="radio"]')&&($(t[e]).find(':input[type="radio"]').is(":checked")?p=!0:p=!1),$(t[e]).find("[data-answer]:visible").find(':input[type="text"][required]').each(function(r){$(this).val()!==""?(n=$(this).attr("data-go-to"),a=a.filter(o=>o.step!==e),a.push({step:e,selected:n}),console.log(n,e),s=s.filter(o=>o.input!==r)):s.find(o=>o.input===r)||s.push({input:r}),s.length===0?c=!0:c=!1,console.log(s)}),$(t[e]).find("[data-answer]:visible").find(':input[type="email"][required]').each(function(r){$(this).val()!==""?(n=$(this).attr("data-go-to"),a=a.filter(o=>o.step!==e),a.push({step:e,selected:n}),q($(this).val())):h=!1})):($(t[e]).find(":input").is('[type="checkbox"]')&&(f==="*"||f>$(t[e]).find(':input[type="checkbox"]').length?$(t[e]).find(':input[type="checkbox"]').each(function(){$(this).is(":checked")?$(t[e]).find(":input[required]").length<1&&(u=!0):u=!1}):$(t[e]).find(':input[type="checkbox"]:checked').length>=f?u=!0:u=!1),$(t[e]).find(":input[required]").is('[type="radio"]')&&($(t[e]).find(':input[type="radio"]').is(":checked")?p=!0:p=!1),$(t[e]).find(':input[type="text"][required]').each(function(r){$(this).val()!==""?s=s.filter(o=>o.input!==r):s.find(o=>o.input===r)||s.push({input:r}),s.length===0?c=!0:c=!1}),$(t[e]).find(':input[type="email"][required]').each(function(){$(this).val()!==""?q($(this).val()):h=!1})),c&&u&&p&&h?v():x()}function L(){e++,e<=t.length-1&&(console.log(e,t.length-1),y(),D&&W(),$('[data-text="current-step"]').text($(t[e]).data("card")?d=d+0:d=d+1))}function B(){e>0&&($(b[e]).removeClass("current"),e--,y()),$('[data-text="current-step"]').text(d=d-1)}$("body").on("keypress",function(i){i.keyCode===13&&k&&(console.log("enter"),$("[data-enter]").data("enter")&&$('[data-form="next-btn"]')[0].click(),i.preventDefault())});$("body").keydown(function(i){(i.metaKey||i.ctrlKey)&&i.keyCode==13&&(console.log(e,t.length-1),e>=t.length-1?(console.log("submitting form"),$("form").submit()):(console.log("not submitting"),i.preventDefault()))});$('[data-form="next-btn"]').on("click",function(){L(),$(t[e]).find(":input").trigger("input")});$('[data-form="back-btn"]').on("click",function(){B()});$(t).find(":input").on("input",function(i){E(i)});$(t).find(":radio").on("click",function(){$(t[e]).find(":input").is(":checked")&&(n=$(t[e]).find("input[type='radio']:checked").attr("data-go-to"),a.push({step:e,selected:n}),$(t[e]).find("[data-radio-skip]").data("radio-skip")===!0&&(console.log("skip"),N===0&&C===0&&S===0&&F===0&&setTimeout(function(){L()},$(t[e]).find("[data-radio-delay]").data("radio-delay"))))});$('[data-form="submit-btn"]').on("click",function(i){i.preventDefault(),$("[data-logic-extra]").data("logic-extra")&&($(this).prop("novalidate",!0),$(t).find(":input").prop("required",!1)),localStorage.removeItem("filledInput"),$(this).parents("form").submit()});t.each(function(){$('[data-form="progress"]').append(I.clone())});b=$('[data-form="progress"]').children();y();})();
