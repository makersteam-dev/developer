"use strict";(()=>{var e=0,r=0,t=$('[data-form="step"]'),D=$('[data-form="progress-indicator"]').clone(),I,N=!1,h=!0,m=!0,g=!0,p=!0,v=!0,b=!0,l="",s=[],k=[],o=[],u=[],f=[],S=$("[data-reinit]").data("reinit"),w=0,x=0,P=0,F=0,R=0,d=[],q=JSON.parse(localStorage.getItem("filledInput")),W=$("[data-memory]").data("memory"),B=$("[data-quiz]").data("quiz");$(D).removeClass("current");$('[data-form="progress"]').children().remove();$('[data-text="total-steps"]').text($('[data-form="step"]:not([data-card="true"])').length);$('[data-form="submit-btn"]').hide();$(t[e]).data("card")?r=r+0:r=r+1;$('[data-text="current-step"]').text(r);t.hide();q&&W&&q.forEach(i=>{$(`input[name="${i.inputName}"][value="${i.value}"]`).attr("type")==="radio"?($(`input[name="${i.inputName}"][value="${i.value}"]`).click(),$(`input[name="${i.inputName}"][value="${i.value}"]`).siblings(".w-radio-input").addClass("w--redirected-checked")):i.value==="on"?($(`input[name="${i.inputName}"]`).click(),$(`input[name="${i.inputName}"]`).siblings(".w-checkbox-input").addClass("w--redirected-checked")):$(`input[name="${i.inputName}"]`).val(i.value)});B&&t.each(function(){$(this).children().attr("data-radio-skip",!0),$(this).children().attr("data-radio-delay",250)});function L(){N=!1,$('[data-form="next-btn"]').css({opacity:"0.2","pointer-events":"none"}),$('[data-form="submit-btn"]').css({opacity:"0.5","pointer-events":"none"})}function y(){N=!0,$('[data-form="next-btn"]').css({opacity:"1","pointer-events":"auto"}),$('[data-form="submit-btn"]').css({opacity:"1","pointer-events":"auto"})}function J(){$('form[data-form="multistep"] :input').not('[type="submit"]').each(function(){$(this).attr("type")==="checkbox"||$(this).attr("type")==="radio"?$(this).prop("checked")&&(d.some(i=>i.inputName===$(this).attr("name"))?(d=d.filter(i=>i.inputName!==$(this).attr("name")),d.push({inputName:$(this).attr("name"),value:$(this).val()})):d.push({inputName:$(this).attr("name"),value:$(this).val()})):d.some(i=>i.inputName===$(this).attr("name"))?(d=d.filter(i=>i.inputName!==$(this).attr("name")),d.push({inputName:$(this).attr("name"),value:$(this).val()})):d.push({inputName:$(this).attr("name"),value:$(this).val()})}),localStorage.removeItem("filledInput"),localStorage.setItem("filledInput",JSON.stringify(d)),console.log(q)}function C(){h=!0,g=!0,p=!0,m=!0,b=!0,v=!0,$('[data-form="custom-progress-indicator"]').removeClass("current"),$($('[data-form="custom-progress-indicator"]')[e]).addClass("current"),k=s.filter(i=>i.step===e-1),$("[data-answer]").hide(),t.hide(),S===!0&&Window.Webflow.destroy(),$(I[e]).addClass("current"),S===!0?(window.Webflow&&window.Webflow.require("ix2").init(),document.dispatchEvent(new Event("readystatechange")),$(t[e]).show()):$(t[e]).fadeIn("slow"),e===0&&!$(t[e]).data("card")&&$(t[e]).find("[data-answer]").show(),k.length>0?$(t[e]).find(`[data-answer="${k[0].selected}"]`).show():($(t[e]).find(`[data-answer="${l}"]`).show(),console.log($(t[e]).find(`[data-answer="${l}"]`).find(":input"))),e===0?($('[data-form="back-btn"]').hide(),$('[data-form="next-btn"]').show()):e===t.length-1||$(t[e]).find('[data-form="submit"]:visible').length>0?($('[data-form="next-btn"]').hide(),$('[data-form="submit-btn"]').show(),$('[data-form="back-btn"]').show()):($('[data-form="next-btn"]').show(),$('[data-form="back-btn"]').show(),$('[data-form="submit-btn"]').hide()),$($(t[e]).find("input[autofocus]")[0]).focus(),$($(t[e]).find("textarea[autofocus]")[0]).focus(),$(t[e]).find(":input").trigger("input"),z()}function E(i){let c=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,20})?$/;console.log("email",i),c.test(i)?v=!0:v=!1}function z(i){$(t[e]).data("card")&&y(),w=$(t[e]).find("textarea[required]:visible").length,x=$(t[e]).find('input[type="text"][required]:visible').length,F=$(t[e]).find("select[required]:visible").length,P=$(t[e]).find('input[type="email"]:visible').length,R=$(t[e]).find('input[type="checkbox"]:visible').length,x>0||F>0||w>0?L():y();let c=$(t[e]).data("checkbox")?$(t[e]).data("checkbox"):0;$("[data-logic-extra]").data("logic-extra")?($(t[e]).data("card")&&(l=$(t[e]).find("[data-go-to]").data("go-to"),s=s.filter(n=>n.step!==e),s.push({step:e,selected:l})),$(t[e]).find("[data-answer]:visible").find(":input").is('[type="checkbox"]')&&(c==="*"||c>$(t[e]).find(':input[type="checkbox"]').length?$(t[e]).find(':input[type="checkbox"]').each(function(){$(this).is(":checked")?$(t[e]).find(":input[required]").length<1&&(l=$(this).parents("[data-go-to]").attr("data-go-to"),s=s.filter(n=>n.step!==e),s.push({step:e,selected:l}),p=!0):p=!1}):$(t[e]).find("[data-answer]:visible").find(':input[type="checkbox"]:checked').length>=c?(console.log($(t[e]).find(":input[required]").length),$(t[e]).find(":input[required]").length<1&&(l=$(t[e]).find("[data-answer]:visible").find(':input[type="checkbox"]:checked').parents("[data-go-to]").attr("data-go-to"),s=s.filter(n=>n.step!==e),s.push({step:e,selected:l}),p=!0)):p=!1),$(t[e]).find("[data-answer]:visible").find(":input[required]").is('[type="radio"]')&&($(t[e]).find(':input[type="radio"]').is(":checked")?g=!0:g=!1),$(t[e]).find("[data-answer]:visible").find(':input[type="text"][required]').each(function(n){$(this).val()!==""?(l=$(this).parents("[data-go-to]").attr("data-go-to"),s=s.filter(a=>a.step!==e),s.push({step:e,selected:l}),console.log(l,e),o=o.filter(a=>a.input!==n)):o.find(a=>a.input===n)||o.push({input:n}),o.length===0?h=!0:h=!1}),$(t[e]).find("[data-answer]:visible").find("select[required]").each(function(n){$(this).val()!==""?(l=$(this).parents("[data-go-to]").attr("data-go-to"),s=s.filter(a=>a.step!==e),s.push({step:e,selected:l}),u=u.filter(a=>a.input!==n)):u.find(a=>a.input===n)||u.push({input:n}),u.length===0?m=!0:m=!1}),$(t[e]).find("[data-answer]:visible").find("textarea[required]").each(function(n){$(this).val()!==""?(l=$$(this).parents("[data-go-to]").attr("data-go-to"),s=s.filter(a=>a.step!==e),s.push({step:e,selected:l}),f=f.filter(a=>a.input!==n)):f.find(a=>a.input===n)||f.push({input:n}),f.length===0?b=!0:b=!1}),$(t[e]).find("[data-answer]:visible").find(':input[type="email"][required]').each(function(n){$(this).val()!==""?(l=$(this).parents("[data-go-to]").attr("data-go-to"),s=s.filter(a=>a.step!==e),s.push({step:e,selected:l}),E($(this).val())):v=!1})):($(t[e]).find(":input").is('[type="checkbox"]')&&(c==="*"||c>$(t[e]).find(':input[type="checkbox"]').length?$(t[e]).find(':input[type="checkbox"]').each(function(){$(this).is(":checked")?$(t[e]).find(":input[required]").length<1&&(p=!0):p=!1}):$(t[e]).find(':input[type="checkbox"]:checked').length>=c?p=!0:p=!1),$(t[e]).find(":input[required]").is('[type="radio"]')&&($(t[e]).find(':input[type="radio"]').is(":checked")?g=!0:g=!1),$(t[e]).find(':input[type="text"][required]').each(function(n){$(this).val()!==""?o=o.filter(a=>a.input!==n):o.find(a=>a.input===n)||o.push({input:n}),o.length===0?h=!0:h=!1}),$(t[e]).find("select[required]").each(function(n){$(this).val()!==""?u=u.filter(a=>a.input!==n):u.find(a=>a.input===n)||u.push({input:n}),u.length===0?m=!0:m=!1}),$(t[e]).find("textarea[required]").each(function(n){$(this).val()!==""?f=f.filter(a=>a.input!==n):f.find(a=>a.input===n)||f.push({input:n}),f.length===0?b=!0:b=!1}),$(t[e]).find(':input[type="email"][required]').each(function(){$(this).val()!==""?E($(this).val()):v=!1})),h&&p&&g&&v&&m&&b?y():L()}function T(){e++,e<=t.length-1&&(console.log(e,t.length-1),C(),W&&J(),$('[data-text="current-step"]').text($(t[e]).data("card")?r=r+0:r=r+1))}function K(){e>0&&($(I[e]).removeClass("current"),e--,C()),$('[data-text="current-step"]').text(r=r-1)}$("body").on("keypress",function(i){i.keyCode===13&&N&&(console.log("enter"),$("[data-enter]").data("enter")?($('[data-form="next-btn"]')[0].click(),i.preventDefault(),i.stopPropagation()):(i.preventDefault(),i.stopPropagation()))});$("body").keydown(function(i){(i.metaKey||i.ctrlKey)&&i.keyCode==13&&(console.log(e,t.length-1),e>=t.length-1?$('[data-form="submit-btn"]').click():(console.log("not submitting"),i.preventDefault(),i.stopPropagation()))});$('[data-form="next-btn"]').on("click",function(){T(),$(t[e]).find(":input").trigger("input")});$('[data-form="back-btn"]').on("click",function(){K()});$(t).find(":input").on("input",function(i){z(i)});$(t).find(":radio").on("click",function(){$(t[e]).find(":input").is(":checked")&&(l=$(t[e]).find("input[type='radio']:checked").attr("data-go-to"),s=s.filter(i=>i.step!==e),s.push({step:e,selected:l}),$(t[e]).find("[data-radio-skip]").data("radio-skip")===!0&&(console.log("skip"),w===0&&x===0&&P===0&&R===0&&setTimeout(function(){T()},$(t[e]).find("[data-radio-delay]").data("radio-delay"))))});$('[data-form="submit-btn"]').on("click",function(i){i.preventDefault(),i.stopPropagation(),console.log("form is being submitted"),$("[data-logic-extra]").data("logic-extra")&&(r===$('[data-form="step"]:not([data-card="true"])').length||$(t[e]).find('[data-form="submit"]:visible').length>0)&&($(this).prop("novalidate",!0),$(t).find(":input").prop("required",!1)),localStorage.removeItem("filledInput"),$(this).parents("form").submit()});t.each(function(){$('[data-form="progress"]').append(D.clone())});I=$('[data-form="progress"]').children();C();})();
